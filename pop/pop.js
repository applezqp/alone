(function(h,g,f,d){var b=window.navigator.userAgent.toLowerCase();var e=util={isUndefined:function(k){return k===void 0},isString:function(k){return !e.isUndefined(k)&&k.constructor==String},isNumber:function(k){return !e.isUndefined(k)&&k.constructor==Number},isObject:function(k){return !e.isUndefined(k)&&k.constructor==Object},isFunction:function(k){return !e.isUndefined(k)&&k.constructor==Function},isElement:function(k){return !e.isUndefined(k)&&!!(k&&k.nodeType&&k.nodeType==1)},isDOM:function(k){return k===f||k===h||k===g||e.isElement()},isStrict:h.compatMode==="CSS1Compat",ua:{ie:/msie/.test(b)&&!/opera/i.test(b),ie6:/msie 6/.test(b)}};var a=DOM={create:function(m,l){if(!e.isString(m)){return}var o=h.createElement(m);if(e.isObject(l)){for(var n in l){switch(n.toLowerCase()){case"class":o.setAttribute(e.ua.ie6?"className":"class",l[n]);break;default:o.setAttribute(n,l[n]);break}}}return o},addCSS:function(k){var l=a.create("style",{type:"text/css"});(h.head||h.getElementsByTagName("head")[0]).appendChild(l);if(l.styleSheet){l.styleSheet.cssText=k}else{l.appendChild(h.createTextNode(k))}return l},viewSize:function(){return e.ua.ie?(e.isStrict?{width:g.clientWidth,height:g.clientHeight}:{width:h.body.clientWidth,height:h.body.clientHeight}):{width:f.innerWidth,height:f.innerHeight}},winSize:function(){return{width:Math.max(h.body.clientWidth,h.body.scrollWidth),height:Math.max(h.body.clientHeight,h.body.scrollHeight)}},scrollTop:function(){return f.pageYOffset||g.scrollTop||h.body.scrollTop}};var j=Event={on:function(n,l,m){var l=/^(on)/.test(l)?l.substr(2):l;if(n.addEListener){n.addEListener(l,function(){m.call(n)},false)}else{if(n.attachE){n.attachE("on"+l,function(){m.call(n)})}else{var k=n["on"+l];n["on"+l]=function(){if(k){k.call(n)}m.call(n)}}}}};var c=function(k){var l=this;l.cfg=k=k||{};l.type=k.type&&e.isString(k.type)&&k.type||"";l.srcNode=k.srcNode&&e.isElement(k.srcNode)&&k.srcNode||null;l.url=!l.srcNode&&k.url&&e.isString(k.url)&&k.url||"";l.width=Number(k.width)||0;l.height=Number(k.height)||0;l.scroll=!!k.scroll&&"yes"||"no";l.trigger=e.isElement(k.trigger)&&k.trigger||null;l.maskable=e.isUndefined(k.maskable)&&true||!!k.maskable;l.closable=e.isUndefined(k.closable)&&true||!!k.closable;l.prefixCls=k.prefixCls&&e.isString(k.prefixCls)&&k.prefixCls+"_"||"";l._pop=null;l._close=null;l._iframe=null;l._mask=null;l._style=null;l._rendered=false};var i=function(k){return new c(k)};c.prototype={render:function(k){var l=this;if(l._rendered){return this}l._style=a.addCSS(["."+l.prefixCls+"alone_pop{","display:none;","position:"+(e.ua.ie6?"absolute":"fixed")+";","width:"+l.width+"px;height:"+l.height+"px;","z-index:100000","}","."+l.prefixCls+"alone_pop_x{","position:absolute;top:5px;right:5px;","display:block;","width:20px;height:20px;","}","."+l.prefixCls+"alone_pop_x:hover{","background:#CCC","}","."+l.prefixCls+"alone_mask{","display:none;","position:absolute;left:0;top:0;","width:100%;height:100%;background:#000;","opacity:0.5;filter:alpha(opacity=50);","z-index:99999","}"].join(""));var m=h.createDocumentFragment();l._pop=a.create("div",{"class":l.prefixCls+"alone_pop"});l.url&&(l._iframe=a.create("iframe",{src:l.url,width:"100%",height:"100%",scrolling:l.scroll,frameBorder:"0",allowtransparency:false}));l.closable&&(l._close=a.create("a",{href:"javascript:void(0)","class":l.prefixCls+"alone_pop_x"}));l._mask=l.maskable?a.create("div",{"class":l.prefixCls+"alone_mask"}):null;var n=null;if(e.ua.ie6){n=a.create("iframe",{src:"about:blank",width:"100%",height:"100%",frameBorder:"0",scrolling:"no"})}n&&l._mask&&l._mask.appendChild(n);l._mask&&m.appendChild(l._mask);l._iframe&&l._pop&&l._pop.appendChild(l._iframe);l._close&&l._pop&&l._pop.appendChild(l._close);l._pop&&m.appendChild(l._pop);h.body.appendChild(m);l._bind();l._rendered=true;return this},_bind:function(){var k=this;j.on(f,"resize",function(){k.fixed(true)});j.on(f,"scroll",function(){k.fixed(true)});k.closable&&k._close&&(j.on(k._close,"click",function(){k.hide()}))},fixed:function(n){var l=this;var o=a.viewSize(),k=a.winSize();if(l._pop){var m=(o.height-l.height)/2;l._pop.style.left=(o.width-l.width)/2+"px";l._pop.style.top=m+"px";e.ua.ie6&&(l._pop.style.top=a.scrollTop()+m+"px")}if(!!n){return}if(l._mask){l._mask.style.width=k.width+"px";l._mask.style.height=k.height+"px"}},show:function(l){var k=this;k.fixed();k._pop&&(k._pop.style.display="block");k._mask&&(k._mask.style.display="block")},hide:function(){var k=this;k._pop&&(k._pop.style.display="none");k._mask&&(k._mask.style.display="none")},destroy:function(){var k=this;k._pop&&k._pop.parentNode.removeChild(k._pop);k._mask&&k._mask.parentNode.removeChild(k._mask);k._style&&k._style.parentNode.removeChild(k._style);k._rendered=false}};f.Pop=i})(document,document.documentElement,window);
