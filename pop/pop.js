(function(a,b,c){var d=window.navigator.userAgent.toLowerCase(),e=util={"isUndefined":function(a){return a===void 0},"isString":function(a){return a.constructor==String},"isNumber":function(a){return a.constructor==Number},"isObject":function(a){return a.constructor==Object},"isFunction":function(a){return a.constructor==Function},"isElement":function(a){return!!a&&!!a.nodeType&&a.nodeType==1},"isDOM":function(d){return d===c||d===a||d===b||e.isElement()},"isStrict":a.compatMode==="CSS1Compat","ua":{"ie":/msie/.test(d)&&!/opera/i.test(d),"ie6":/msie 6/.test(d)}},f=DOM={"create":function(b,c){if(!e.isString(b))return;var d=a.createElement(b);if(e.isObject(c))for(var f in c)switch(f.toLowerCase()){case"class":d.setAttribute(e.ua.ie6?"className":"class",c[f]);break;default:d.setAttribute(f,c[f])}return d},"addCSS":function(b){var c=f.create("style",{"type":"text/css"});(a.head||a.getElementsByTagName("head")[0]).appendChild(c),c.styleSheet?c.styleSheet.cssText=b:c.appendChild(a.createTextNode(b))},"viewSize":function(){return e.ua.ie?e.isStrict?{"width":b.clientWidth,"height":b.clientHeight}:{"width":a.body.clientWidth,"height":a.body.clientHeight}:{"width":c.innerWidth,"height":c.innerHeight}},"winSize":function(){return{"width":Math.max(a.body.clientWidth,a.body.scrollWidth),"height":Math.max(a.body.clientHeight,a.body.scrollHeight)}},"scrollTop":function(){return c.pageYOffset||b.scrollTop||a.body.scrollTop}},g=Event={"on":function(a,b,c){var b=/^(on)/.test(b)?b.substr(2):b;if(a.addEListener)a.addEListener(b,function(){c.call(a)},!1);else if(a.attachE)a.attachE("on"+b,function(){c.call(a)});else{var d=a["on"+b];a["on"+b]=function(){d&&d.call(a),c.call(a)}}}},h=function(a){this.cfg=a=a||{},this.type=a.type&&e.isString(a.type)&&a.type||"",this.srcNode=a.srcNode&&e.isElement(a.srcNode)&&a.srcNode||null,this.url=a.url&&e.isString(a.url)&&a.url||"",this.width=Number(a.width)||0,this.height=Number(a.height)||0,this.scroll=!!a.scroll&&"yes"||"no",this.trigger=e.isElement(a.trigger)&&a.trigger||null,this.maskable=e.isUndefined(a.maskable)&&!0||!!a.maskable,this.closable=e.isUndefined(a.closable)&&!0||!!a.closable,this.prefixCls=a.prefixCls&&e.isString(a.prefixCls)&&a.prefixCls+"_"||"",this._pop=null,this._close=null,this._iframe=null,this._mask=null,this._rendered=!1},i=function(a){return new h(a)};h.prototype={"render":function(){var a,b;return this._rendered?this:(f.addCSS(["."+this.prefixCls+"alone_pop{","display:none;","position:"+(e.ua.ie6?"absolute":"fixed")+";","width:"+this.width+"px;height:"+this.height+"px;","z-index:100000","}","."+this.prefixCls+"alone_pop_x{","position:absolute;top:5px;right:5px;","display:block;","width:20px;height:20px;","}","."+this.prefixCls+"alone_pop_x:hover{","background:#CCC","}","."+this.prefixCls+"alone_mask{","display:none;","position:absolute;left:0;top:0;","width:100%;height:100%;background:#000;","opacity:0.5;filter:alpha(opacity=50);","z-index:99999","}"].join("")),a=document.createDocumentFragment(),this._pop=f.create("div",{"class":this.prefixCls+"alone_pop"}),this.url&&(this._iframe=f.create("iframe",{"src":this.url,"width":"100%","height":"100%","scrolling":this.scroll,"frameBorder":"0","allowtransparency":!1})),this.closable&&(this._close=f.create("a",{"href":"javascript:void(0)","class":this.prefixCls+"alone_pop_x"})),this._mask=this.maskable?f.create("div",{"class":this.prefixCls+"alone_mask"}):null,b=null,e.ua.ie6&&(b=f.create("iframe",{"src":"about:blank","width":"100%","height":"100%","frameBorder":"0","scrolling":"no"})),b&&this._mask&&this._mask.appendChild(b),this._mask&&a.appendChild(this._mask),this._iframe&&this._pop&&this._pop.appendChild(this._iframe),this._close&&this._pop&&this._pop.appendChild(this._close),this._pop&&a.appendChild(this._pop),document.body.appendChild(a),this._bind(),this._rendered=!0,this)},"_bind":function(){var a=this;g.on(c,"resize",function(){a.fixed(!0)}),g.on(c,"scroll",function(){a.fixed(!0)}),this.closable&&this._close&&g.on(this._close,"click",function(){a.hide()})},"fixed":function(a){var b,c=f.viewSize(),d=f.winSize();this._pop&&(b=(c.height-this.height)/2,this._pop.style.left=(c.width-this.width)/2+"px",this._pop.style.top=b+"px",e.ua.ie6&&(this._pop.style.top=f.scrollTop()+b+"px"));if(!!a)return;this._mask&&(this._mask.style.width=d.width+"px",this._mask.style.height=d.height+"px")},"show":function(){this.fixed(),this._pop&&(this._pop.style.display="block"),this._mask&&(this._mask.style.display="block")},"hide":function(){this._pop&&(this._pop.style.display="none"),this._mask&&(this._mask.style.display="none")},"destroy":function(){}},window.Pop=i})(document,document.documentElement,window)
